# E-commerce 요구사항

## 기능적 요구사항
포인트
1. 사용자ID, 충전액을 받아 포인트를 충전할 수 있어야 한다.
2. 1회 가능 충전액은 최대 1_000_000이다.
3. 충전 시 충전액, 시간을 기재한 포인트 충전 이력을 남겨야 한다.
2. 사용자ID를 받아 해당 시용자의 현재 보유 포인트를 조회할 수 있어야 한다.
3. 보유할 수 있는 최대 포인트는 5_000_000이다.

상품
1. 상품의 ID, 가격, 수량을 목록으로 조회할 수 있어야 한다.
2. 최근 3일 가장 많이 팔린 상위 5개의 상품을 조회할 수 있어야 한다.

주문
1. 사용자ID, [상품ID, 수량] 목록을 받아 주문할 수 있어야 한다.
2. 주문 시 유효한 쿠폰을 전체 금액에 대해 적용할 수 있다.
3. 상품 재고 < 주문 수량이면 주문에 실패해야 한다.
4. 주문에 성공하면 상품 재고를 주문 수량만큼 차감하고 결제대기 상태가 되어야 한다.
5. 결제대기 상태에 5분 이상 머무르면 주문이 취소 되어야 한다.
6. 주문이 취소되면 차감했던 상품 재고를 롤백하고 결제취소 상태가 되어야 하며, 쿠폰을 사용했다면 쿠폰 사용을 롤백해야 한다.
7. 결제가 완료되면 주문완료 상태가 되어야 한다.

결제
1. 주문ID를 받아 결제할 수 있어야 한다.
2. 보유 포인트 < 총 결제금액이면 결제에 실패한다.
3. 결제에 성공하면 포인트를 차감하고 포인트 사용 이력을 저장하고 주문을 결제완료 상태로 변경해야 한다.
4. 결제에 성공하면 데이터 플랫폼으로 주문 정보를 전송해야 한다.
5. 데이터 플랫폼으로 데이터 전송의 성공 여부는 결제의 성공여부에 영향을 미치지 않아야 한다.

쿠폰
1. 쿠폰에는 유효기간, 할인율, 수량이 존재해야 한다.
2. 쿠폰의 수량이 0이면 발급되지 않아야 한다.
3. 이미 쿠폰을 발급한 사용자는 같은 쿠폰을 발급할 수 없다.
4. 쿠폰 발급에 성공하면 쿠폰 수량이 차감되어야 한다.

## 비기능적 요구사항
1. 유저의 보유 포인트 차감이 동시적인 요청에도 모두 정상 처리되어야 한다.  
2. 재고관리가 정확하게 이루어져 잘못된 주문이 발생하지 않아야 한다.  
